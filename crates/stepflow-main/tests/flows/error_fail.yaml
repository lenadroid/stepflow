config:
  plugins:
    - name: mock
      type: mock
      components:
        mock://error:
          input_schema:
            type: object
            properties:
              mode:
                type: string
          output_schema:
            type: object
            properties:
              output:
                type: string
          behaviors:
            { mode: "error" }:
              outcome: failed
              error: {code: 8, message: "error"}
            { mode: "succeed" }:
              outcome: success
              result: {output: "succeeded"}
input_schema:
  type: object
  properties: {}
output_schema:
  type: object
  properties:
    result:
      type: string
steps:
  - id: error
    component: mock://error
    on_error:
      action: fail
    input:
      mode: { $from: { workflow: input }, path: mode }
output:
  error_result: { $from: { step: error }, path: output }
test_cases:
  - input: { mode: "error" }
    expect_failure: true
  - input: { mode: "succeed" }