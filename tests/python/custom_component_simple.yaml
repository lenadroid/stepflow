input_schema:
  type: object
  properties:
    x:
      type: number
    y:
      type: number
output_schema:
  type: object
  properties:
    custom_calculation:
      type: number
    product:
      type: number
    sum:
      type: number
steps:
- id: simple_addition
  component: python://custom_component
  input_schema: null
  output_schema: null
  input:
    input_schema:
      type: object
      properties:
        x:
          type: number
        y:
          type: number
      required:
      - x
      - y
    code: data['x'] + data['y']
    input:
      x:
        $from:
          workflow: input
        path: x
      y:
        $from:
          workflow: input
        path: y
- id: simple_multiplication
  component: python://custom_component
  input_schema: null
  output_schema: null
  input:
    input_schema:
      type: object
      properties:
        x:
          type: number
        y:
          type: number
      required:
      - x
      - y
    code: data['x'] * data['y']
    input:
      x:
        $from:
          workflow: input
        path: x
      y:
        $from:
          workflow: input
        path: y
- id: complex_calculation
  component: python://custom_component
  input_schema: null
  output_schema: null
  input:
    input_schema:
      type: object
      properties:
        sum:
          type: number
        product:
          type: number
      required:
      - sum
      - product
    code: math.sqrt(data['sum'] ** 2 + data['product'] ** 2)
    input:
      sum:
        $from:
          step: simple_addition
        path: result
      product:
        $from:
          step: simple_multiplication
        path: result
output:
  sum:
    $from:
      step: simple_addition
    path: result
  product:
    $from:
      step: simple_multiplication
    path: result
  custom_calculation:
    $from:
      step: complex_calculation
    path: result
test:
  cases:
  - name: calculate with x=3, y=4
    input:
      x: 3
      y: 4
    output:
      outcome: success
      result:
        custom_calculation: 13.892443989449804
        product: 12
        sum: 7
  - name: calculate with x=5, y=12
    input:
      x: 5
      y: 12
    output:
      outcome: success
      result:
        custom_calculation: 62.36184731067546
        product: 60
        sum: 17
